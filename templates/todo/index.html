{% extends 'base.html' %}

{% block title %}{% endblock %}

{% block content %}
<h1>TODO list<a class="btn btn-primary" style="float: right" href="{% url 'todo:create_task' %}">Add task</a></h1></h1>
{% if task_list %}
  <table class="table">
    {% for task in task_list %}
      <tr>
        <td>
          <h4 style="font-weight: 700;">
            {{ task.content }}
            {% if task.done %}
              <span class="text-success">Done</span>
            {% else %}
              <span class="text-danger">Not done</span>
            {% endif %}
          </h4>
          <p>
            {{ task.created_at }}
            {% if task.deadline %}
              {{ task.deadline }}
            {% endif %}
          </p>
          <p>
            Tags: {{ task.tags.all|join:". " }}
            <a href="{% url 'todo:task_update' pk=task.id %}">Update</a>
            <a href="{% url 'todo:task_delete' pk=task.id %}">Delete</a>
          </p>
        </td>
        <td>
          <form action="{% url 'todo:task_done' task.id %}" method="post" style="display:inline;">
            {% csrf_token %}
            {% if task.done %}
              <button type="submit" class="btn btn-secondary">Undo</button>
            {% else %}
              <button type="submit" class="btn btn-success">Complete</button>
            {% endif %}
          </form>
        </td>
      </tr>
    {% endfor %}
  </table>
{% else %}
<p>You have no Task yet</p>
{% endif %}

{% endblock %}